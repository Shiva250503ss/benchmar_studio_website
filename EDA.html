<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
      h1, h2 { color: #333; }
      code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 4px; }
      pre { background-color: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; }
      img { max-width: 100%; height: auto; }
      .placeholder { color: #888; font-style: italic; }
      .center {
    display: block;
    margin-left: auto;
    margin-right: auto;
}
  </style>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Benchmark Studio</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="mediaqueries.css" />
  </head>
  <body>
    <nav id="desktop-nav">
      <div class="logo">Benchmark Studio</div>
      <div>
        <ul class="nav-links">
          <li><a href="index.html">Introduction</a></li>
          <li><a href="EDA.html">Data Exploration</a></li>
          <li><a href="">Models Implemented</a></li>
          <li><a href="">Results</a></li>
          <li><a href="team.html">Team</a></li>
        </ul>
      </div>
    </nav>
    <nav id="hamburger-nav">
      <div class="logo">Benchmark Studio</div>
      <div class="hamburger-menu">
        <div class="hamburger-icon" onclick="toggleMenu()">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="menu-links">
          <li><a href="#about" onclick="toggleMenu()">Introduction</a></li>
          <li><a href="" onclick="toggleMenu()">Data Exploration</a></li>
          <li><a href="" onclick="toggleMenu()">Models Implemented</a></li>
          <li><a href="" onclick="toggleMenu()">Results</a></li>
          <li><a href="" onclick="toggleMenu()">Team</a></li>
        </div>
      </div>
    </nav>
    <section id="background-image-section1"></section>
    <br>
    <h1 class="title">LLM Models Performance Comparison Analysis</h1>
    <!DOCTYPE html>
<html>
<head>
    <title>Data Cleaning Steps</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
        h1, h2 { color: #333; }
        code { background-color: #f4f4f4; padding: 2px 4px; border-radius: 4px; }
        pre { background-color: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; }
        img { max-width: 100%; height: auto; }
        .placeholder { color: #888; font-style: italic; }
        .box {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .center {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

    </style>
</head>
<body>

<h1>Data Cleaning Steps</h1>

<h2>Fetching and Saving Battle Data</h2>
<div class="box">
    <p>
        Here, we have fetched the latest battle data from the external source using the <code>requests</code> library. We first saved the JSON to a local file by the name <code>local_file_name.json</code>. Then, we loaded this JSON into a pandas DataFrame and sorted it according to the timestamp, <code>tstamp</code>, in ascending order. After sorting, we saved the DataFrame as a CSV file named <code>battles_data.csv</code>. The verification at the end demonstrates once more that the data has been saved to the necessary file for further analysis.
    </p>
    <p class="placeholder">
        <img src="assets/fetch.png" width="500" class="center">
    </p>
</div>


<h2>Converting Unix Timestamps to Readable Dates</h2>
<div class="box">
    <p>
        This cell converts Unix timestamps in seconds into a more readable date format (YYYY-MM-DD) for easier analysis in a DataFrame. For instance, <code>1609459200</code> will represent in this format as <code>2021-01-01</code>.
    </p>
    <p class="placeholder"><img src="assets/tstam.png" width="1000" class="center"></p>
</div>

<h2>Extracting Month and Year from Timestamp</h2>
<div class="box">
    <p>
        First, we convert the <code>'tstamp'</code> column to a proper datetime format using <code>pd.to_datetime</code>. Then, we create a new column called <code>'month_year'</code>, which extracts the month and year from the timestamp and stores it as a period, say <code>'2024-08'</code>. We then fetch all the unique month-year combinations and convert them into a list. Finally, for further use or analysis, this list of unique month-year combinations is displayed:
    </p>
    <p class="placeholder"><img src="assets/tstamp2.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Extracting Unique Dates</h2>
<div class="box">
    <p>
        Here, we will extract the unique dates in the <code>'tstamp'</code> column from the filtered DataFrame by changing the datetime values to date format. We then convert these unique dates into a list and display the list of unique dates for further analysis or use.
    </p>
    <p class="placeholder"><img src="assets/uniquedate.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Excluding Specific Dates from DataFrame</h2>
<div class="box">
    <p>
        In this cell, the code imports the <code>datetime</code> module, where it excludes the specific dates from a DataFrame and filters that DataFrame to remove any rows that contain these excluded dates. The certain dates that are August 1, 2, 3 in 2024 are omitted from analysis, while the data includes only the time period between Aug 4 to 14 in 2024.
    </p>
    <p class="placeholder"><img src="assets/excluding.png" width="1000" height="1000" class="center"></p>
</div>


<h2>Creating <code>winner_model</code> Column and Cleaning DataFrame</h2>
<div class="box">
    <p>
        This code creates a new column called <code>'winner_model'</code>, which selects either the <code>'model_a'</code> or <code>'model_b'</code> depending on who was the winner. Then, it removes the columns <code>'model_a'</code>, <code>'model_b'</code>, and <code>'winner'</code> because they are not needed once the column <code>'winner_model'</code> has been created. The cleaned DataFrame is then returned without showing the index.
    </p>
    <p class="placeholder"><img src="assets/winner.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Extracting Conversation Metadata</h2>
<div class="box">
    <p>
        Here we define a function, <code>extract_conv_metadata</code>, that does safe parsing on <code>'conv_metadata'</code>. Then, it extracts the appropriate token information for the winning model through user tokens, assistant tokens, and context tokens. We use this function to apply to every row in the DataFrame and create new columns out of the metadata extracted. Finally, we join these new columns with the original DataFrame, drop the original <code>'conv_metadata'</code> column, and display the updated DataFrame without the index.
    </p>
    <p class="placeholder"><img src="assets/extract1.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Filtering Out Unknown Languages</h2>
<div class="box">
    <p>
        Here, we filtered the DataFrame for those rows for which <code>'language'</code> does not equal <code>'unknown'</code>. Then, we display this updated DataFrame without showing an index to make certain that we retain only entries of known languages going forward.
    </p>
    <p class="placeholder"><img src="assets/filter.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Listing Unique Models</h2>
<div class="box">
    <p>
        Here, we will be able to get the unique models by pulling a list of unique values from the <code>'model'</code> column in the DataFrame. Then we are going to find the length of this list, which is going to give us a total count of unique models. Now we print both the list of unique models and its length for the user to analyze further.
    </p>
    <p class="placeholder"><img src="assets/unique.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Extracting Deduplication Tags</h2>
<div class="box">
    <p>
        Here, we define a function <code>extract_dedup_tag</code>, which safely evaluates the column <code>'dedup_tag'</code> to extract the values for keys <code>'high_freq'</code> and <code>'sampled'</code>. Then, we apply this function onto every row of column <code>'dedup_tag'</code>, creating two new columns: <code>'dedup_tag_high_freq'</code> and <code>'dedup_tag_sampled'</code>. Later, we do not need <code>'dedup_tag'</code>, and hence we print the updated DataFrame.
    </p>
    <p class="placeholder"><img src="assets/duplicate.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Converting Timestamp to Period</h2>
<div class="box">
    <p>
        Here, we convert the <code>'tstamp'</code> column to a period with daily frequency and store it in a new column named <code>'tstamp_period'</code>. Optionally, one may also drop the original column <code>'tstamp'</code>, if it won't be used anymore. Finally, we print a few lines of the updated DataFrame to verify.
    </p>
    <p class="placeholder"><img src="assets/convert.png" width="1000" height="1000" class="center"></p>
</div>

<h2>Cleaning Up the DataFrame</h2>
<div class="box">
    <p>
        These cells of code are used to clean up the DataFrame by removing the columns <code>'category_tag'</code>, <code>'tstamp'</code>, <code>'dedup_tag'</code>, and <code>'month_year'</code> from the dataset because these columns are unnecessary. So we can concentrate on the remaining relevant data.
    </p>
    <p class="image-container">
      <img src="assets/clean1.png" width="1000"height="1000"class="center">
      <br>
      <img src="assets/clean2.png" width="250" height="500"class="center">
      <br>
      <img src="assets/clean3.png" width="250" height="500"class="center">
      <br>
      <img src="assets/clean4.png" width="500" height="1000"class="center"></p>
</div>
<h2>Comparison of Old and New Dataset</h2>
<div class="box">
    <p>
        In this section, we compare the old dataset with the new cleaned dataset to highlight the differences and improvements made through the data cleaning process. We examine factors such as missing values, data types, and the presence of unnecessary columns.
    </p>
    <div class="image-container">
        <img src="assets/old_dataset.png" alt="Old Dataset Overview" class ="center">
        <br>
        <img src="assets/new_dataset.png" alt="New Cleaned Dataset Overview" class ="center">
    </div>
    <p>
        The images above display the structure and content of the datasets before and after cleaning. As observed, the new dataset has unwanted columns removed, timestamps converted to readable dates, and entries with unknown languages filtered out.
    </p>
</div>

</body>
</html>

    </body>
    </html>